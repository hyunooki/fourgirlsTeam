<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.exam.test.mapper.ProdListMapper">
	<select id="ProdList" resultType="prodvo"
		parameterType="com.exam.test.vo.ProdListVo">
		SELECT prod_no,
		prod_name,
		price,
		content,
		create_date,
		image,
		pdf,
		count,
		user_id,
		category_no
		FROM products
		where prod_name like '%' ||
		#{prodName} || '%'
		<choose>
			<when test="asc == 1">
				ORDER BY prod_name ASC
			</when>
			<when test="asc == 0">
				ORDER BY prod_name DESC
			</when>
			<when test="priceAsc == 1">
				ORDER BY price ASC
			</when>
			<when test="priceAsc == 0">
				ORDER BY price DESC
			</when>
		</choose>
	</select>

	<insert id="ProdInsert" parameterType="prodvo">
		insert into products (prod_no, prod_name, content, user_id, price)
		values((select max(prod_no) +1 from products), #{prodName},#{content},#{userId},#{price})
	</insert>


</mapper>